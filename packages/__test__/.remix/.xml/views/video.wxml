<template name="video_children">
  <block wx:if="{{children.length > 0}}">
    <block
      wx:for="{{children}}" 
      wx:for-index="index" 
      wx:for-item="node"
      wx:key="{{node.key}}"
    >
      <section data-type="{{node.type}}" node-id="{{node.id}}" node="{{node}}" data-id="{{node.dataId}}" id="{{node.id}}" />
    </block>
  </block>
</template>

<template name="__video">
  <video src="{{src}}" duration="{{duration}}" danmu-list="{{danmuList}}" danmu-btn="{{danmuBtn}}" enable-danmu="{{enableDanmu}}" autoplay="{{autoplay}}" loop="{{loop}}" muted="{{muted}}" initial-time="{{initialTime}}" page-gesture="{{pageGesture}}" page-gesture="{{pageGesture}}" direction="{{direction}}" show-fullscreen-btn="{{showFullscreenBtn}}" show-play-btn="{{showPlayBtn}}" show-center-play-btn="{{showCenterPlayBtn}}" enable-progress-gesture="{{enableProgressGesture}}" object-fit="{{objectFit}}" show-mute-btn="{{showMuteBtn}}" title="{{title}}" play-btn-position="{{playBtnPosition}}" enable-play-gesture="{{enablePlayGesture}}" auto-pause-if-navigate="{{autoPauseIfNavigate}}" auto-pause-if-open-native="{{autoPauseIfOpenNative}}" vslide-gesture="{{vslideGesture}}" vslide-gesture-in-fullscreen="{{vslideGestureInFullscreen}}" poster="{{poster}}" controls="{{controls}}" bindpause="pause" binderror="error" bindwaiting="waiting" bindprogress="progress" bindfullscreenchange="fullscreenchange" bindended="ended" bindpause="pause" bindplay="play" style="{{style}}" data-id="{{dataId}}" data-type="{{type}}" class="{{className}}">
  </video>
</template>

<template name="_video">
  <block wx:if="{{e}}">
    <block wx:if="{{e.timeupdate}}">
      <video src="{{src}}" duration="{{duration}}" danmu-list="{{danmuList}}" danmu-btn="{{danmuBtn}}" enable-danmu="{{enableDanmu}}" autoplay="{{autoplay}}" loop="{{loop}}" muted="{{muted}}" initial-time="{{initialTime}}" page-gesture="{{pageGesture}}" page-gesture="{{pageGesture}}" direction="{{direction}}" show-fullscreen-btn="{{showFullscreenBtn}}" show-play-btn="{{showPlayBtn}}" show-center-play-btn="{{showCenterPlayBtn}}" enable-progress-gesture="{{enableProgressGesture}}" object-fit="{{objectFit}}" show-mute-btn="{{showMuteBtn}}" title="{{title}}" play-btn-position="{{playBtnPosition}}" enable-play-gesture="{{enablePlayGesture}}" auto-pause-if-navigate="{{autoPauseIfNavigate}}" auto-pause-if-open-native="{{autoPauseIfOpenNative}}" vslide-gesture="{{vslideGesture}}" vslide-gesture-in-fullscreen="{{vslideGestureInFullscreen}}" poster="{{poster}}" controls="{{controls}}" bindpause="pause" binderror="error" bindwaiting="waiting" bindprogress="progress" bindfullscreenchange="fullscreenchange" bindended="ended" bindpause="pause" bindplay="play" style="{{style}}" data-id="{{dataId}}" data-type="{{type}}" class="{{className}}" bindtimeupdate="timeupdate">
      </video>
    </block>
    <block wx:else>
      <template is="__video" data="{{ ...props, children: children, dataId: dataId, type: type }}" />
    </block>
  </block>
  <block wx:else>
    <template is="__video" data="{{ ...props, children: children, dataId: dataId, type: type }}" />
  </block>
</template>

<template name="video">
  <template is="_video" data="{{ ...props, children: children, dataId: dataId, type: type, props: props }}" />
</template>
